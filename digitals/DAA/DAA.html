<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>DAA (Rendered from DAA.md)</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.1.0/github-markdown-light.min.css">
	<style>
		body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;margin:20px;background:#f6f8fa}
		.container{max-width:900px;margin:0 auto;background:#fff;padding:28px;border-radius:8px;box-shadow:0 6px 20px rgba(2,6,23,.08)}
		.markdown-body{box-sizing:border-box;min-width:200px}
		pre{background:#0d1117;color:#c9d1d9;padding:12px;border-radius:6px;overflow:auto}
	</style>
	<!-- marked for Markdown -> HTML, mermaid for diagrams -->
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
	<main class="container">
		<h2>DAA (Markdown render)</h2>
		<div id="content" class="markdown-body"></div>
		<div id="error" style="color:#b00;margin-top:12px;display:none"></div>
	</main>

	<script>
		// Render DAA/DAA.md into this page, converting ```mermaid blocks into mermaid diagrams
		(async function(){
			const mdPath = 'DAA.md'; // fetch local copy placed in the same folder
			try {
				const res = await fetch(mdPath, {cache: 'no-cache'});
				if (!res.ok) throw new Error('Failed to fetch ' + mdPath + ' (status ' + res.status + ')');
				let md = await res.text();

				// Convert mermaid fenced blocks to <div class="mermaid">... </div>
				// This preserves all other markdown exactly as-is.
				md = md.replace(/```mermaid\s*([\s\S]*?)```/g, function(_, body){
					return '\n<div class="mermaid">' + body.trim() + '</div>\n';
				});

				// Use marked to convert markdown to HTML
				const html = marked.parse(md, {gfm: true});
				document.getElementById('content').innerHTML = html;

				// Initialize mermaid for all inserted mermaid divs
				mermaid.initialize({startOnLoad:false, theme: 'base'});
				// mermaid.init will find elements with class "mermaid"
				mermaid.init(undefined, document.querySelectorAll('.mermaid'));
			} catch (err) {
				document.getElementById('error').style.display = 'block';
				document.getElementById('error').textContent = err.message;
			}
		})();
	</script>
</body>
</html>
